struct %main.base_type%Interval*%main.type_name%_interval_negate(struct Stack*output_stack, struct Stack*local_stack, struct %main.base_type%Interval*a)
{
    struct %main.base_type%Interval*out = ALLOCATE(output_stack, struct %main.base_type%Interval);
    if (%main.type_name%_get_sign(a->min) != -%main.type_name%_get_sign(a->max))
    {
        out->min = %main.type_name%_negate(output_stack, a->max);
        out->max = %main.type_name%_negate(output_stack, a->min);
    }
    else
    {
        void*local_stack_savepoint = local_stack->cursor;
        out->min = %main.type_name%_copy(output_stack, %main.type_name%_get_min(output_stack, local_stack, %main.type_name%_negate(local_stack, a->max), a->min));
        out->max = %main.type_name%_copy(output_stack, %main.type_name%_get_max(output_stack, local_stack, %main.type_name%_negate(local_stack, a->min), a->max));
        local_stack->cursor = local_stack_savepoint;
    }
    return out;
}